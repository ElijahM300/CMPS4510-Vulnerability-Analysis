/* Listing 6-22 from textbook (The Art of Software Security Assessment by
 *                             Dowd, McDonald, and Schuh)
 *
 * This listing is very close to being compilable. It just needs libraries
 */

int get_int(char *data)
{
  unsigned int n = atoi(data);

  if(n < 0 || n > 1024)
    return -1;
  return n;
}

int main(int argc, char **argv)
{
  unsigned long n;
  char buf[1024];

  if(argc < 2)
    exit(0);

  n = get_int(argv[1]);
  
  if(n < 0) {
    fprintf(stderr, "illegal length specified\n");
    exit(-1);
  }

  memset(buf, 'A', n);

  return 0;
}
