/* Listing 6-27 from textbook (The Art of Software Security Assessment by
 *                            Dowd, McDonald, and Schuh)
 */

int read_data(int sockfd)
{
    int bitlength;
    char *buffer;

    bitlength = network_get_int(length);

    buffer = (char *)malloc(bitlength / 8 + 1);

    if (buffer == NULL)
        die("no memory");

    if(read(sockfd, buffer, bitlength / 8) < 0){
        error("read error: %m");
        return -1;
    }

    return 0;
}

